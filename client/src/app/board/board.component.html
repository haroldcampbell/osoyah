<section class="board-shell">
  <header class="board-header">
    <div class="board-title" data-testid="board-title">Kanban</div>
    <p class="board-subtitle">Minimal board for focused flow.</p>
  </header>

  @if (boardService.loading) {
    <div class="board-state">Loading board...</div>
  }
  @if (boardService.error) {
    <div class="board-state error">{{ boardService.error }}</div>
  }

  @if (boardService.board && !boardService.loading) {
    <div class="board" data-testid="board">
      <div class="board-toolbar">
        <div class="board-name">{{ boardService.board.title }}</div>
        <div class="add-list">
          <input
            type="text"
            placeholder="New list title"
            [(ngModel)]="boardService.newListTitle"
            (keyup.enter)="boardService.addList()"
            data-testid="add-list-input"
          />
          <button type="button" (click)="boardService.addList()" data-testid="add-list-button">
            Add list
          </button>
        </div>
      </div>

      <div
        class="lists"
        cdkDropList
        cdkDropListOrientation="horizontal"
        [cdkDropListData]="boardService.board.lists"
        (cdkDropListDropped)="boardService.dropList($event)"
      >
        @for (list of boardService.board.lists; track list.id) {
          <app-board-list
            cdkDrag
            data-testid="list"
            [attr.data-list-id]="list.id"
            [attr.data-list-title]="list.title"
            [list]="list"
          ></app-board-list>
        }

        @if (boardService.board.lists.length === 0) {
          <div class="empty-board">No lists yet. Add one to start.</div>
        }
      </div>
    </div>
  }
</section>
